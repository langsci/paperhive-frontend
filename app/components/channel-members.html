<div class="col-sm-12">
  <div class="form-group">
    <button
      type="button" ng-click="$ctrl.open()" class="btn btn-primary"
      ng-disabled="!$ctrl.channel.isActive"
      title="{{$ctrl.channel.isActive ? '' : 'Activate the channel first to invite people'}}"
    >
      <i class="fa fa-envelope" aria-hidden="true"></i>
      Invite someone
    </button>

    <h2>Members</h2>
    <table class="table table-hover ph-md-margin-bottom">
      <tr ng-repeat="member in $ctrl.channel.members">
        <td>
          {{member.person.displayName}},
          {{member.person.account.email}}
          <span class="label label-default ph-sm-margin-left" ng-repeat="role in member.roles">
            {{role}}
          </span>
        </td>
      </tr>
    </table>

    <div ng-if="$ctrl.channel.invitations.length > 0">
      <h2>Invitations</h2>
      <table class="table table-hover">
        <tr ng-repeat="invitation in $ctrl.channel.invitations">
          <td>
            {{invitation.email}}
            <span class="label label-default ph-sm-margin-left" ng-repeat="role in invitation.roles">
              {{role}}
            </span>
            <button
              type="button" class="btn btn-danger btn-sm pull-right"
              ng-confirm-click="Really remove invitation?"
              confirmed-click="$ctrl.deleteChannelInvitation(invitation.channel, invitation.id)"
              ng-disabled="!$ctrl.channel.isActive"
              title="{{$ctrl.channel.isActive ? '' : 'Activate the channel first to remove invitations'}}"
            >
              Remove invitation
            </button>
            <div class="text-muted">
              <small>
                invited by {{invitation.invitedBy.displayName}} on
                {{invitation.createdAt | date:'M/d/yyyy HH:mm'}}
              </small>
            </div>
          </td>
        </tr>
      </table>
    </div>

  </div>
</div>
