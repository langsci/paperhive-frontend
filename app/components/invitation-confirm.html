<div class="container ph-lg-margin-bottom">
  <h2 class="text-center">Confirm your invitation</h2>

  <!-- <h4 class="ph-heading-light ph-md-margin-bottom text-center">
    Enter your email address and we will send you a link to reset your password.
  </h4> -->

  <div class="row ph-md-margin-bottom">

    <div class="col-sm-offset-3 col-sm-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <b>{{$ctrl.invitation.channel.name}}</b>
          <span class="label label-info ph-sm-margin-left"
            ng-repeat="role in $ctrl.invitation.roles"
          >
            {{role}}
          </span>
          <span class="pull-right">
            <button
              type="button" class="btn btn-danger btn-sm"
              ng-confirm-click="Really discard this invitation?"
              confirmed-click="$ctrl.invitationDelete($ctrl.invitation.channel.id, $ctrl.invitation.id)"
            >
              Discard
            </button>
            <span class="ph-sm-margin-left">
              <button
                type="button" class="btn btn-primary btn-sm"
                ng-click="$ctrl.invitationConfirm($ctrl.invitation.channel.id, $ctrl.invitation.id)"
              >
                Confirm
              </button>
            </span>
          </span>
          <div>
            {{$ctrl.invitation.channel.description}}
          </div>
          <div class="ph-sm-margin-top">
            <small>
              invited by {{$ctrl.invitation.invitedBy.displayName}}
              <a href="./users/{{invitation.invitedBy.account.username}}">
                @{{$ctrl.invitation.invitedBy.account.username}}
              </a>
            </small>
          </div>
          <div>
            <small>
              on {{$ctrl.invitation.createdAt | date:'M/d/yyyy HH:mm'}}
            </small>
          </div>
        </div>
      </div>
    </div>

    <div class="row ph-md-padding-top">
      <div class="col-md-offset-4 col-md-4">
        <form name="confirmAndPasswordForm" novalidate>
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" name="password"
            ng-model="$ctrl.password" placeholder="Enter a password"
            ng-disabled="$ctrl.sending || $ctrl.success"
            required>
          <p class="help-block">
            <span ng-if="(confirmAndPasswordForm.$submitted || confirmAndPasswordForm.password.$touched) && passwordRequestForm.password.$error.required"
              class="text-danger"
            >
              Please enter a password.
            </span>
          </p>

          <button class="btn btn-primary btn-block ph-md-margin-top" type="submit"
            ng-click="!$ctrl.sending && !$ctrl.success && !confirmAndPasswordForm.$invalid && $ctrl.send($ctrl.password)"
            ng-class="{disabled: $ctrl.sending || $ctrl.success || confirmAndPasswordForm.$invalid}"
          >
            <i ng-if="$ctrl.sending" class="fa fa-fw fa-spinner fa-spin"></i>
            <i ng-if="!$ctrl.sending" class="fa fa-fw"></i>
            Send password
          </button>
          <p class="help-block">
            <ul class="fa-ul text-success" ng-if="$ctrl.success">
              <li><i class="fa fa-li fa-check"></i> {{$ctrl.success.message}}</li>
            </ul>
            <ul class="fa-ul text-danger" ng-if="$ctrl.error">
              <li><i class="fa fa-li fa-times"></i> {{$ctrl.error.message}}</li>
            </ul>
          </p>
        </form>
      </div>
    </div>
  </div>
</div>
