<ul class="ph-timeline">

  <li class="ph-timeline-inverted">
    <div class="ph-timeline-badge">
      <i class="fa fa-heartbeat" aria-hidden="true"></i>
    </div>
    <div class="panel panel-default ph-timeline-panel">
      <div class="ph-timeline-arrow-container">
        <div class="ph-arrow ph-arrow-outward-left"></div>
      </div>

      <div ng-if="$ctrl.document">
        You can discuss, reply and hive documents to start your activity now.
      </div>

      <div ng-if="$ctrl.person">
        <span ng-if="$ctrl.auth.user.username === TODO">
          You can improve your activity by discussing, replying and hiving documents.
        </span>
        <span ng-if="$ctrl.auth.user.username !== TODO">
          Here you can find TODOs recently discussed, replied and hived documents.
        </span>
      </div>
    </div>
  </li>

  <li ng-repeat="activity in $ctrl.activities" class="ph-timeline-inverted">

    <div class="ph-timeline-badge"
      ng-if="activity.activityType === 'updateReply' || activity.activityType === 'createReply'"
    >
      <i class="fa fa-reply" aria-hidden="true"></i>
    </div>
    <div class="ph-timeline-badge"
      ng-if="activity.activityType === 'updateDiscussion' || activity.activityType === 'createDiscussion'"
    >
      <i class="fa fa-comment" aria-hidden="true"></i>
    </div>
    <div ng-if="activity.activityType === 'documentHived'" class="ph-timeline-badge">
      <img alt="logo white" height="30" src="./static/img/logo-hexagon-white.svg" />
    </div>

    <div class="panel panel-default ph-timeline-panel">
      <div class="ph-timeline-arrow-container">
        <div class="ph-arrow ph-arrow-outward-left"></div>
      </div>
      <div class="pull-right">
        <small class="text-muted">
          <i class="fa fa-clock-o" aria-hidden="true"></i>
          <span am-time-ago="activity.updatedAt"></span>
        </small>
      </div>
      <div>
        <a class="ph-link-icon" ng-href="./users/{{activity.person.account.username}}">
          <avatar user="activity.person" size="30" classes="img-circle"></avatar>
        </a>
        <a ng-href="./users/{{activity.person.account.username}}">{{activity.person.displayName}}</a>

        <span ng-switch="activity.activityType">
          <span ng-switch-when="documentHived">
            <span ng-if="$ctrl.document">hived this document</span>
            <span ng-if="$ctrl.person">
              hived
              <a ng-href="./documents/{{activity.document.id}}">document</a>
            </span>
          </span>
          <span ng-switch-when="createDiscussion">started</span>
          <span ng-switch-when="createReply">replied to</span>
          <span ng-switch-when="updateReply">updated a reply to</span>
          <span ng-switch-when="updateDiscussion">updated</span>
        </span>

        <span ng-if="activity.activityType !== 'documentHived'">
          <a ng-href="./documents/{{activity.document.id}}/discussions/{{activity.discussion.id}}">
            {{activity.discussion.title}}
          </a>
          <span ng-if="$ctrl.person">
            on
            <a ng-href="./documents/{{activity.document.id}}">{{activity.documentRevision.title}}</a>
            <small class="text-muted" ng-repeat="author in activity.documentRevision.authors">
              {{author.name}}{{$last ? '' :', '}}
            </small>
          </span>
        </span>

      </div>
    </div>
  </li>
</ul>

<!-- <div ng-if="$ctrl.activities.length === 0" class="panel panel-default">
  <div class="panel-body">
    <h4 class="ph-sm-padding text-center">
      There are no activities to show.
    </h4>
  </div>
</div> -->
