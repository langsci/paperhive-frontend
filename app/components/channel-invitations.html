<div class="row">
  <div class="col-sm-12">
    <div class="form-group">
      <h2>
        Pending invitations
      </h2>
      <table class="table table-hover">
        <!-- email invitation -->
        <tr ng-repeat="invitation in $ctrl.channel.invitations"
          ng-mouseenter="showButtons=true"
          ng-mouseleave="showButtons=false"
        >
          <td ng-if="invitation.email">
            <div class="ph-xs-margin-bottom">
              {{invitation.email}}
              <span class="label label-default ph-sm-margin-left"
                ng-repeat="role in invitation.roles"
              >
                {{role}}
              </span>
              <button
                ng-show="showButtons"
                ng-if="$ctrl.isOwner"
                type="button" class="btn btn-danger btn-sm pull-right"
                ng-confirm-click="Really remove invitation?"
                confirmed-click="$ctrl.invitationDelete($ctrl.channel.id, invitation.id)"
                ng-disabled="!$ctrl.channel.isActive"
                title="{{$ctrl.channel.isActive ? '' : 'Activate the channel first to remove invitations'}}"
              >
                <i class="fa fa-times" aria-hidden="true"></i>
                Remove invitation
              </button>
            </div>
            <div class="text-muted">
              <small>
                invited by {{invitation.invitedBy.displayName}}
                on {{invitation.createdAt | date:'M/d/yyyy HH:mm'}}
              </small>
            </div>
          </td>

          <!-- person invitation -->
          <td ng-if="!invitation.email">
            <avatar user="invitation.person" size="30"
              classes="img-circle ph-sm-margin-right"
            ></avatar>
            {{invitation.person.displayName}}
            <a href="./users/{{invitation.person.account.username}}"><small>@{{invitation.person.account.username}}</small></a>
            <span class="label label-default ph-sm-margin-left"
              ng-repeat="role in invitation.roles"
            >
              {{role}}
            </span>
            <button
              ng-show="showButtons"
              ng-if="$ctrl.isOwner"
              type="button" class="btn btn-danger btn-sm pull-right"
              ng-confirm-click="Really remove invitation?"
              confirmed-click="$ctrl.invitationDelete($ctrl.channel.id, invitation.id)"
              ng-disabled="!$ctrl.channel.isActive"
              title="{{$ctrl.channel.isActive ? '' : 'Activate the channel first to remove invitations'}}"
            >
              <i class="fa fa-times" aria-hidden="true"></i>
              Remove invitation
            </button>
            <div class="text-muted">
              <small>
                invited by {{invitation.invitedBy.displayName}} on
                {{invitation.createdAt | date:'M/d/yyyy HH:mm'}}
              </small>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
